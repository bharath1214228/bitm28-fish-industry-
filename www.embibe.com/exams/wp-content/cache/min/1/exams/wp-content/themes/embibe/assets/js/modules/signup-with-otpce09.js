"use strict";jQuery(".mobile-signup .signup, .mobile-header-singup").click(function(){jQuery(".form-popup").fadeIn();jQuery("body").addClass("has-overlay");jQuery("html").addClass("popup-open");var userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream){window.scrollTo(0,500);jQuery(".mobile_footer").focus()}else{jQuery(".mobile_footer").focus()}});jQuery(".footer-signup-btn").click(function(evn){jQuery(".create-free-account").show();jQuery(".mobile_footer").focus()});jQuery(".close_popup").click(function(){jQuery("#otp_counter").html("0");jQuery("#otp_counter").css("display","block");jQuery("#resendotp_btn").css("display","none");jQuery(".form-popup").fadeOut();jQuery(".create-free-account").fadeOut();jQuery(".signup-main-screen").removeClass("pop-hide").addClass("pop-show");jQuery(".signup-otp-screen").removeClass("pop-show").addClass("pop-hide");jQuery(".otpinput .first").val("");jQuery(".otpinput .second").val("");jQuery(".otpinput .third").val("");jQuery(".otpinput .fourth").val("");jQuery(".otpinput .fifth").val("");jQuery(".otpinput .sixth").val("");jQuery("input.mobile_footer").val("");jQuery("body").removeClass("has-overlay");jQuery("html").removeClass("popup-open")});jQuery("input[name='mobile']").on("input",function(e){jQuery(this).val(jQuery(this).val().replace(/[^0-9]/g,""))});function sigup_mob_common_widget(){var error=0;var mobile=jQuery(".mobile_footer").val();var error1=jQuery(".error1").val();var error2=jQuery(".error2").val();var error3=jQuery(".error3").val();var error4=jQuery(".error4").val();var error5=jQuery(".error5").val();var agree=jQuery('.agree_footer').is(':checked');jQuery("#mobile_error_footer").html("");jQuery("#agree_error_footer").html("");var ename=jQuery("#examname").html();var cname=jQuery(".evt_catname").html();var primary_goal=jQuery("#primary_goal").html();var primary_exam=jQuery("#primary_exam").html();if(ename!=""){var enamedata=jQuery("#examname").html()}else{var enamedata=null}
if(cname!=""){var cnamedaat=jQuery(".evt_catname").html()}else{var cnamedaat=null}
if(mobile===""||mobile==null){jQuery("#mobile_error_footer").show().html(error1);error++;setTimeout(function(){jQuery("#mobile_error_footer").hide()},3000);return!1}
var first_char=jQuery(".mobile_footer").val().substring(0,1);var mobileno=jQuery(".mobile_footer").val();var phonenoformat=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;if(isNaN(mobile)||mobile.indexOf(" ")!=-1||first_char<=5){jQuery("#mobile_error_footer").show().html(error2);error++;setTimeout(function(){jQuery("#mobile_error_footer").hide()},3000);return!1}
if(!mobileno.match(phonenoformat)){jQuery("#mobile_error_footer").show().html(error3);error++;setTimeout(function(){jQuery("#mobile_error_footer").hide()},3000);return!1}
if(agree==!1){jQuery("#agree_error_footer").show().html(error4);error++;setTimeout(function(){jQuery("#agree_error_footer").hide()},3000)}
var phoneno=/^\d{10}$/;var bodySignup;var bodySignin;var userExistUrl2;var randomStr=randomString(10,"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");if(error==0){bodySignup={first_name:"Student",mobile:mobileno,password:"Embibe@123",profile_pic:"https://assets.embibe.com/production/webassets/images/avatar/orange.png",primary_goal:primary_goal,primary_exam:primary_exam,};bodySignin={mobile:mobileno,device_id:randomStr,connected_response:!0,};userExistUrl2=userExistUrl+`?mobile=${mobileno}`;fetch(userExistUrl2,{method:"get",credentials:"include",}).then((response)=>response.json()).then((data)=>{if(data.data.mobile){jQuery("#mobile_error_footer").show().html(error5);setTimeout(function(){jQuery("#mobile_error_footer").hide()},3000)}else{fetch(signUpUrl,{method:"post",credentials:"include",headers:{"Content-Type":"application/json",},body:JSON.stringify(bodySignup),}).then((response)=>response.json()).then((sign_data)=>{window.dataLayer=window.dataLayer||[];dataLayer.push({event:"Sign_Up_Proceed",eventCategory:"Sign_Up_Proceed",eventAction:"SU_Sign_Up_Proceed_Click",eventLabel:"SignUp Pop-Up",userId:"guest",ScreenName:jQuery("#name_type").val(),exam_name:enamedata,exams_category:cnamedaat,locale:"en",is_paid:!1,org_id:"1",source:"exams_web",feature_name:"Sign Up",module_name:"Sign Up",});window.dataLayer=window.dataLayer||[];dataLayer.push({event:"Account_Register_Success",eventCategory:"Account_Register_Success",eventAction:"SU_Account_Register_Success",eventLabel:"SignUp Pop-Up",userId:"guest",account_id:sign_data.data.user_details.id,ScreenName:jQuery("#name_type").val(),exam_name:enamedata,exams_category:cnamedaat,locale:"en",is_paid:!1,org_id:"1",source:"exams_web",feature_name:"Sign Up",module_name:"Sign Up",});setCookie("account_id",sign_data.data.user_details.id,7);jQuery(".signup-main-screen").removeClass("pop-show").addClass("pop-hide");jQuery(".signup-otp-screen").removeClass("pop-hide").addClass("pop-show");jQuery(".incorrect-otp, .otp-expired, .resend-otp-successfull").hide();jQuery(".send-otp-successfull").show().addClass("success-msg");setTimeout(function(){jQuery(".send-otp-successfull").hide()},4000);jQuery("#otp_counter").css("display","block");jQuery("#resendotp_btn").css("display","none");var timeLeft=10;var elem=document.getElementById("otp_counter");var elemresend=document.getElementById("resendotp_btn");var timerId=setInterval(countdown,1000);function countdown(){if(timeLeft==-1){clearTimeout(timerId);elem.style.display="none";elemresend.style.display="block"}else{elem.innerHTML=timeLeft;timeLeft--}}})}})}}
function procced_mob_otp_common_widget(){console.log("OTP Start");var otpfirst=jQuery(".otpinput .first").val();var otpsecond=jQuery(".otpinput .second").val();var otpthird=jQuery(".otpinput .third").val();var otpfour=jQuery(".otpinput .fourth").val();var otpfive=jQuery(".otpinput .fifth").val();var otpsix=jQuery(".otpinput .sixth").val();var finalOTP=otpfirst+""+otpsecond+""+otpthird+""+otpfour+""+otpfive+""+otpsix;var otp_token_from_cookie=getCookie(protp);var embibe_token_from_cookie=getCookie(prtoken);var user_account_id=getCookie("account_id");var bodyOtp;var primary_goal;var primary_exam;bodyOtp={otp:finalOTP};var ename=jQuery("#examname").html();var cname=jQuery(".evt_catname").html();if(ename!=""){var enamedata=jQuery("#examname").html()}else{var enamedata=null}
if(cname!=""){var cnamedaat=jQuery(".evt_catname").html()}else{var cnamedaat=null}
bodyOtp={otp:finalOTP};if(otpfirst!=""&&otpsecond!=""&&otpthird!=""&&otpfour!=""&&otpfive!=""&&otpsix!=""){window.dataLayer=window.dataLayer||[];dataLayer.push({event:"Sign_Up",eventCategory:"Sign_Up",eventAction:"SU_Input_OTP",eventLabel:"SignUp Pop-Up",userId:"guest",ScreenName:jQuery("#name_type").val(),exam_name:enamedata,exams_category:cnamedaat,account_id:user_account_id,locale:"en",is_paid:!1,org_id:"1",source:"exams_web",feature_name:"SignUp - Account Verification",module_name:"Sign Up",});fetch(verifyotp,{method:"post",credentials:"include",headers:{"Content-Type":"application/json","otp-token":otp_token_from_cookie,},body:JSON.stringify(bodyOtp),}).then((response)=>response.json()).then((otp_data)=>{if(otp_data.status==200){window.dataLayer=window.dataLayer||[];dataLayer.push({event:"Sign_Up_Otp_Proceed",eventCategory:"Sign_Up_Otp_Proceed",eventAction:"SU_OTP_Proceed_Click",eventLabel:"SignUp Pop-Up",userId:"guest",ScreenName:jQuery("#name_type").val(),exam_name:enamedata,exams_category:cnamedaat,account_id:user_account_id,locale:"en",is_paid:!1,org_id:"1",source:"exams_web",feature_name:"SignUp - Account Verification",module_name:"Sign Up",});var embibe_token_from_cookie=getCookie(prtoken);var tkn;var fname;var pexam;var pgoal;console.log("OTP Veriyed apu called");var rs_data=fetch(connected_profiles,{method:"get",credentials:"include",headers:{"Content-Type":"application/json","embibe-token":embibe_token_from_cookie,},}).then((response)=>response.json()).then((data_cp)=>{if(data_cp.status==200){console.log("Profile Connected called and get response");var text={fname:data_cp.data.user_details.first_name,tkn:data_cp.data.embibe_token,pexam:data_cp.data.profile_details.primary_exam,pgoal:data_cp.data.profile_details.primary_goal,};return text}});rs_data.then((r)=>{console.log("Add Profile APi start");var bodyaddprofile;bodyaddprofile={first_name:r.fname,primary_exam:r.pexam,primary_goal:r.pgoal,};fetch(addprofile,{method:"post",credentials:"include",headers:{"Content-Type":"application/json","embibe-token":embibe_token_from_cookie,},body:JSON.stringify(bodyaddprofile),}).then((response)=>response.json()).then((addpro_data)=>{console.log("Add Profile APi Responsed and redirect to product");jQuery(".close_popup").trigger("click");window.location.href=homepage})})}else if(otp_data.status==400){jQuery(".send-otp-successfull, .otp-expired, .resend-otp-successfull, .please-enter-otp").hide();jQuery(".incorrect-otp").show();setTimeout(function(){jQuery(".please-enter-otp, .incorrect-otp").hide()},1500)}else if(otp_data.status==401){jQuery(".send-otp-successfull, .incorrect-otp, .resend-otp-successfull, .please-enter-otp").hide();jQuery(".otp-expired").show();setTimeout(function(){jQuery(".otp-expired").hide()},1500)}else{jQuery(".send-otp-successfull, .incorrect-otp, .resend-otp-successfull, .please-enter-otp").hide();jQuery(".otp-expired").show();setTimeout(function(){jQuery(".otp-expired").hide()},1500)}})}else{jQuery(".send-otp-successfull, .incorrect-otp, .resend-otp-successfull, .send-otp-successfull").hide();jQuery(".please-enter-otp").show();setTimeout(function(){jQuery(".please-enter-otp, .incorrect-otp").hide()},1500)}}
function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}
if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}
return""}
var otp_token_from_cookie=getCookie(protp);function resend_otp_common_widget(){jQuery(".otpinput .first").val("");jQuery(".otpinput .second").val("");jQuery(".otpinput .third").val("");jQuery(".otpinput .fourth").val("");jQuery(".otpinput .fifth").val("");jQuery(".otpinput .sixth").val("");jQuery(".resend-otp-successfull").show().addClass("success-msg");const ac=new AbortController();navigator.credentials.get({otp:{transport:["sms"]},signal:ac.signal,}).then((otp)=>{var number=otp.code;output=[];sNumber=number.toString();for(var i=0,len=sNumber.length;i<len;i+=1){output.push(+sNumber.charAt(i))}
jQuery('.otpinput input#first').val(output[0]);jQuery('.otpinput input#second').val(output[1]);jQuery('.otpinput input#third').val(output[2]);jQuery('.otpinput input#fourth').val(output[3]);jQuery('.otpinput input#fifth').val(output[4]);jQuery('.otpinput input#sixth').val(output[5]);procced_mob_otp_common_widget()});var timeLeft=10;var elem=document.getElementById("otp_counter");var elemresend=document.getElementById("resendotp_btn");var timerId=setInterval(countdown,1000);elem.style.display="block";elemresend.style.display="none";function countdown(){if(timeLeft==-1){clearTimeout(timerId);elem.style.display="none";elemresend.style.display="block"}else{elem.innerHTML=timeLeft;timeLeft--}}
var otp_token_from_cookie=getCookie(protp);var embibe_token_from_cookie=getCookie("prod_embibe-token");var user_account_id=getCookie("prod_embibe-token");fetch(resend_otp,{method:"post",credentials:"include",headers:{"Content-Type":"application/json","otp-token":otp_token_from_cookie,},body:JSON.stringify(""),}).then((response)=>response.json()).then((resend_data)=>{if(resend_data.status==200){jQuery(".send-otp-successfull, .incorrect-otp, .otp-expired, .send-otp-successfull").hide()}else if(otp_data.status==400){}else if(otp_data.status==401){jQuery(".send-otp-successfull, .incorrect-otp, .send-otp-successfull, .resend-otp-successfull").hide();jQuery(".otp-expired").show().addClass("error")}})}
let in1=document.getElementById("first"),ins=document.querySelectorAll('input[type="number"]'),splitNumber=function(e){let data=e.data||e.target.value;if(!data)return;if(data.length===1)return;popuNext(e.target,data)},popuNext=function(el,data){el.value=data[0];data=data.substring(1);if(el.nextElementSibling&&data.length){popuNext(el.nextElementSibling,data)}};ins.forEach(function(input){input.addEventListener("keyup",function(e){if(e.keyCode===16||e.keyCode==9||e.keyCode==224||e.keyCode==18||e.keyCode==17){return}
if((e.keyCode===8||e.keyCode===37)&&this.previousElementSibling&&this.previousElementSibling.tagName==="INPUT"){this.previousElementSibling.select()}else if(e.keyCode!==8&&this.nextElementSibling){this.nextElementSibling.select()}
if(e.target.value.length>1){splitNumber(e)}});input.addEventListener("focus",function(e){if(this===in1)return;if(in1.value==""){in1.focus()}
if(this.previousElementSibling.value==""){this.previousElementSibling.focus()}})});jQuery(".otp-field").keydown(function(event){if(!(event.keyCode==46||event.keyCode==8||event.keyCode==37||event.keyCode==39||event.keyCode==9||(jQuery(this).val().length<1&&((event.keyCode>=48&&event.keyCode<=57)||(event.keyCode>=96&&event.keyCode<=105))))){event.preventDefault();return!1}});jQuery(".close-modal").click(function(){var user_account_id=getCookie("account_id");if(jQuery("#ev_otp").hasClass("pop-show")){var ename=jQuery("#examname").html();var cname=jQuery(".evt_catname").html();if(ename!=""){var enamedata=jQuery("#examname").html()}else{var enamedata=null}
if(cname!=""){var cnamedaat=jQuery(".evt_catname").html()}else{var cnamedaat=null}
window.dataLayer=window.dataLayer||[];dataLayer.push({event:"Sign_Up",eventCategory:"Sign_Up",eventAction:"SU_Close_OTP_Verification",eventLabel:"SignUp Pop-Up",ScreenName:jQuery("#name_type").val(),exam_name:enamedata,exams_category:cnamedaat,account_id:user_account_id,locale:"en",is_paid:!1,org_id:"1",content_id:null,content_type:null,content_subtype:null,title:null,source:"exams_web",feature_name:"SignUp - Account Verification",module_name:"Sign Up",userId:"guest",})}});jQuery("#resendotp_btn").click(function(){var user_account_id=getCookie("account_id");document.querySelectorAll(".first")[0].focus();var ename=jQuery("#examname").html();var cname=jQuery(".evt_catname").html();if(ename!=""){var enamedata=jQuery("#examname").html()}else{var enamedata=null}
if(cname!=""){var cnamedaat=jQuery(".evt_catname").html()}else{var cnamedaat=null}
window.dataLayer=window.dataLayer||[];dataLayer.push({event:"Sign_Up",eventCategory:"Sign_Up",eventAction:"SU_Resend_OTP_Click",eventLabel:"SignUp Pop-Up",ScreenName:jQuery("#name_type").val(),exam_name:enamedata,exams_category:cnamedaat,account_id:user_account_id,locale:"en",is_paid:!1,org_id:"1",content_id:null,content_type:null,content_subtype:null,title:null,source:"exams_web",feature_name:"SignUp - Account Verification",module_name:"Sign Up",userId:"guest",})});function randomString(length,chars){var result="";for(var i=length;i>0;--i)
result+=chars[Math.floor(Math.random()*chars.length)];return result}